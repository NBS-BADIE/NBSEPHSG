{% extends "base.html" %}

{% block content %}
<style>
/* üé® Style pro du tableau */
.table {
    border-radius: 0.6rem;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.table thead th {
    background-color: #0056b3;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.6px;
}

.table-hover tbody tr:hover {
    background-color: rgba(0, 86, 179, 0.05);
    transition: 0.3s ease;
}

/* üñºÔ∏è Image miniature */
.img-thumbnail {
    border-radius: 8px;
    transition: transform 0.3s ease;
}
.img-thumbnail:hover {
    transform: scale(1.05);
}

/* ‚úèÔ∏è Ic√¥nes d‚Äôaction */
.action-btn i {
    font-size: 1.1rem;
    transition: transform 0.25s ease, color 0.25s ease;
}

.action-btn:hover i {
    transform: scale(1.25);
}

/* Couleurs sp√©cifiques */
.btn-primary {
    background-color: #0056b3;
    border: none;
}

.btn-primary:hover {
    background-color: #0070ff;
}

.btn-danger:hover i {
    color: #fff;
}

.btn-success i {
    font-size: 1.2rem;
    margin-right: 4px;
}

</style>

<div class="container py-4">

    <h2 class="mb-4"><i class="bi bi-hospital me-2"></i>Liste des services</h2>

    <!-- üì® Messages -->
    {% if messages %}
      {% for message in messages %}
          {% if 'service' in message.tags %}
            <div class="alert alert-{{ message.level_tag }} alert-dismissible fade show" role="alert">
              <i class="bi bi-info-circle me-2"></i>{{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fermer"></button>
            </div>
          {% endif %}
      {% endfor %}
    {% endif %}

    <!-- ‚ûï Bouton ajouter -->
    <a href="{% url 'ajouter_service_svc' %}" class="btn btn-outline-success mb-3 shadow-sm">
        <i class="bi bi-plus-circle"></i> Ajouter un service
    </a>

    <!-- üìã Tableau -->
    <div class="table-responsive shadow-sm">
        <table class="table table-striped table-hover table-bordered align-middle">
            <thead class="table-dark">
                <tr class="text-center">
                    <th>Nom</th>
                    <th>Description</th>
                    <th>Image</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for service in services %}
                <tr>
                    <td>{{ service.nom }}</td>
                    <td>{{ service.description }}</td>
                    <td class="text-center">
                        {% if service.image %}
                            <img src="{{ service.image.url }}" alt="{{ service.nom }}" class="img-thumbnail" style="max-width: 100px;">
                        {% else %}
                            <span class="text-muted fst-italic">Aucune image</span>
                        {% endif %}
                    </td>
                    <td class="text-center">
    <a href="{% url 'service_manage' service.pk %}" class="me-3 d-inline-block">
        <i class="bi bi-gear text-dark fs-3"></i>
    </a>

    <a href="{% url 'supprimer_service_svc' service.pk %}" 
       onclick="return confirm('Supprimer ce service ?')" 
       title="Supprimer"
       class="d-inline-block">
        <i class="bi bi-trash text-danger fs-3"></i>
    </a>
</td>

                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" class="text-center text-muted">Aucun service trouv√©.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
